const BN = require('bn.js');
const TestComponent = artifacts.require("TestPoseidonComponent");

contract("Unified addition component evaluation", accounts => {
    it("Case 1", async () => {
        const instance = await TestComponent.deployed();
        await instance.set_params(
            new BN('40000000000000000000000000000000224698fc094cf91b992d30ed00000001', 16),
            new BN('28867777448171893195754124589869130277690340596632500575713534438442847395049', 10)
        );
        await instance.evaluate('0x384735a86ee93e04d3242fc5228b2ce9fd3e993438a1bd1533a353e4d4119dd214d3a2b5f523172acfe643de27d847be67f490954aae95c009b99438c11c5c5431e04d7af0423d77e7c90ce7acd5edfdba5f9e2812e8eee81e09806d784d8f023cf3c7122e77c64e1fee23ce6f7d74780419a46499cd1038b206117cd2f671090c73d4746c687a3fdb99ab46bd9e0efb1e863c8a6c0eebd16bcde18bf128e7cb3c394f3ccf42dd69433f3c9e95b14605fdc40434886ff24dcf84162d624919af0028cd976c20691c9e7afc053d24552c7d2048a7257a08a2221b63678cdae6de3b3f4a7b8801c00fce60ab7e085cd02f3e93b54fa466ce03937ef7565faf4b630906694ce26a8cc75d5ed181a8a686e3b6600154078ebe6087b76dc184c9c7f7204f397f2e6fe84e18fef23b2f475d3c35bbf3c77c0f9aa75054b549cdd86d5d14c05e8da6913089133cba76f7da669a63b324d6dbac013ce40c6efa08004b363be4645e08fbc6bba8a6107af780bfd8dd7114b9ba1841f78a4ac132574d6bbe0b3736fe2dc951852d4383f4bcfec97617a4394b414956f2fcdef66bbe87984422a7c3584193bb3690aea95f3c8b875022a60ec90c97580972f254e97f8aeeb9126d356291b372f82944eab4fe6031fdcaec7d24bea32ed7a185e1e73a3914a8228ae72c2f3ffd8ea2a3979768f8cfe01303db9bb7fcdaeca9e43cfe7a2c120c2c3d94ae2c52260224b98def5e57281cf428f9084ce960df19a2d982b16f058c271d3d8d411cd5bdabe0ae8f94e33765921b4f3ec87d476af0fbce55d489942d3179fdaf5435b81b75b73f0ab9ea14af50d18cc8ccc13bc571389d33db56cbbc0a88991d306ff89b412945ebb01724b97b765e196a75cb30a1c6b260e4c107cd2be4c8eea9de54890e4e5e7574a1a72d829148af7d5a75e26c30027c8ae1d32d0323409b13441113bd457d669977dc8dd5bae36af884e841c43b0cd96b0fabb7287de057ad7f285ccedce31b35e8edc1228d1350802b18e34d96fef4d857896d1945275b26affd03451d96460dbc6eef885b182e6311d24a830cc1d9ff28099c3e9d4f8e0292296083e71b6cbf36cf578967bfddc0650b8f7709ad0b9648910b30a7f2be344b0465115da913e015b75a3bf5339b174fd1a4ce5e9853796152311d1272df215484713283dfbf9874ea486693532bc519da618d0248e6f82493583fce7d220948d155efa7316c26f17048c3003cdc7969207b3d58a708871e5c003a83506a5c66971a2f05f81c42b01e8a461fca9a16943ede984af205cfdfaa59');
        const evaluation_result = await instance.m_evaluation_result();
        assert.equal(
            evaluation_result.toString(10),
            '25233477192336665037682527985858566183353043495248649287999569848108177051602',
            'Gate evaluation result is not correct!'
        );
        const theta_acc_result = await instance.m_theta_acc();
        assert.equal(
            theta_acc_result.toString(10),
            '1976499999820661819552539332832698425856485160547217699694454629109744347131',
            'Theta accumulator result is not correct!'
        );
    });
});
